<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>YAML 校验工具</title>
    <link th:href="@{/yaml/codemirror.min.css}" rel="stylesheet"/>
    <link th:href="@{/yaml/monokai.min.css}" rel="stylesheet"/>
</head>
<body>
<h1>YAML 校验工具</h1>
<div id="yamlInput" style="height: 300px;"></div>
<button onclick="validateYAML()">校验YAML</button>
<p id="result"></p>

<script th:src="@{/yaml/codemirror.min.js}" type="text/javascript"></script>
<script th:src="@{/yaml/yaml.min.js}" type="text/javascript"></script>
<script th:src="@{/yaml/js-yaml.min.js}" type="text/javascript"></script>

<script th:inline="javascript">
    /*<![CDATA[*/

    var yamlInput = CodeMirror(document.getElementById("yamlInput"), {
        mode: "text/x-yaml",
        theme: "monokai",
        lineNumbers: true
    });

    function validateYAML() {
        var yamlText = yamlInput.getValue();
        var result = document.getElementById("result");

        try {
            jsyaml.load(yamlText);
            result.innerHTML = "YAML Format Valid!";
            result.style.color = "green";
            yamlInput.setOption("styleActiveLine", false);
        } catch (e) {
            result.innerHTML = "YAML Format Error: " + e.message;
            result.style.color = "red";
            var lineNumber = e.mark.line;
            yamlInput.addLineClass(lineNumber, "background", "line-error");
            yamlInput.setOption("styleActiveLine", true);
        }
    }

    /*]]>*/
</script>
</body>
</html>
